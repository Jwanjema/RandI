# Render Deployment Checklist

## Before Deployment

### 1. Code Preparation
- [ ] All features tested locally
- [ ] Backend server runs without errors
- [ ] Frontend connects to backend successfully
- [ ] All dependencies listed in requirements.txt
- [ ] No sensitive data in code (use environment variables)

### 2. Git Setup
- [ ] Create GitHub repository
- [ ] Initialize git: `git init`
- [ ] Add .gitignore file
- [ ] Commit all code: `git add . && git commit -m "Initial commit"`
- [ ] Push to GitHub: `git push -u origin main`

### 3. Files to Verify
- [ ] `render.yaml` exists in root
- [ ] `build.sh` exists and is executable
- [ ] `requirements.txt` includes gunicorn, whitenoise, dj-database-url
- [ ] `.env.example` exists for reference
- [ ] Frontend `.env.production` configured

---

## Deployment Steps

### 1. Create Render Account
- [ ] Sign up at https://render.com
- [ ] Verify email
- [ ] Connect GitHub account

### 2. Deploy with Blueprint (render.yaml)
- [ ] Click "New" â†’ "Blueprint"
- [ ] Select your GitHub repository
- [ ] Render creates all services automatically
- [ ] Wait for initial deployment (~5-10 minutes)

### 3. Configure Backend Environment Variables
- [ ] Go to backend service settings
- [ ] Add/update `ALLOWED_HOSTS`: `your-backend.onrender.com`
- [ ] Add `CORS_ALLOWED_ORIGINS`: `https://your-frontend.onrender.com`
- [ ] Add `CSRF_TRUSTED_ORIGINS`: `https://your-frontend.onrender.com,https://your-backend.onrender.com`
- [ ] Verify `DATABASE_URL` is set (auto-generated)
- [ ] Verify `SECRET_KEY` is set (auto-generated)

### 4. Configure Frontend Environment
- [ ] Go to frontend service settings
- [ ] Update `REACT_APP_API_URL`: `https://your-backend.onrender.com/api`
- [ ] Trigger manual deploy if needed

### 5. Create Superuser
- [ ] Open backend service shell
- [ ] Run: `cd backend && python manage.py createsuperuser`
- [ ] Create admin credentials
- [ ] Save credentials securely

---

## Post-Deployment Testing

### 1. Test Backend
- [ ] Visit: `https://your-backend.onrender.com/admin`
- [ ] Login with superuser credentials
- [ ] Verify admin panel loads

### 2. Test Frontend
- [ ] Visit: `https://your-frontend.onrender.com`
- [ ] Login page loads
- [ ] Login works with superuser credentials
- [ ] Dashboard displays

### 3. Test Features
- [ ] Create a building
- [ ] Create a unit
- [ ] Create a tenant
- [ ] Record a payment
- [ ] Generate a report
- [ ] Download PDF (if applicable)

### 4. Check Logs
- [ ] Backend logs show no errors
- [ ] Frontend deploys successfully
- [ ] Database connection working

---

## URLs to Save

After deployment, save these URLs:

```
Frontend: https://rental-frontend.onrender.com
Backend API: https://rental-backend.onrender.com/api
Admin Panel: https://rental-backend.onrender.com/admin
Database: (internal URL - visible in Render dashboard)
```

---

## Important Notes

### Free Tier Limitations
- Services spin down after 15 minutes of inactivity
- First request after spin-down takes ~30 seconds
- 750 hours/month of uptime (enough for 1 service 24/7)

### If Things Go Wrong
1. Check logs in Render dashboard
2. Verify environment variables
3. Ensure CORS/CSRF settings match your URLs
4. Check database connection
5. Review build.sh executed successfully

---

## Quick Commands

### View Logs
```bash
# In Render Shell (backend)
cd backend
python manage.py check
python manage.py showmigrations
```

### Create Test Data
```bash
cd backend
python manage.py create_users
python manage.py seed_data
```

### Collect Static Files
```bash
cd backend
python manage.py collectstatic --no-input
```

### Database Migrations
```bash
cd backend
python manage.py makemigrations
python manage.py migrate
```

---

## Success Criteria

Your deployment is successful when:
- [x] Frontend loads at your Render URL
- [x] You can login
- [x] Dashboard shows data
- [x] You can create buildings/units/tenants
- [x] No console errors in browser
- [x] Backend responds to API calls
- [x] Database persists data between deployments

---

## Need Help?

- Review logs in Render dashboard
- Check [RENDER_DEPLOYMENT.md](RENDER_DEPLOYMENT.md) for detailed instructions
- Visit https://render.com/docs for documentation
- Check https://community.render.com for community support

---

## Environment Variables Quick Reference

### Backend (.env)
```bash
DATABASE_URL=<auto-generated>
SECRET_KEY=<auto-generated>
DEBUG=False
ALLOWED_HOSTS=your-backend.onrender.com
CORS_ALLOWED_ORIGINS=https://your-frontend.onrender.com
CSRF_TRUSTED_ORIGINS=https://your-frontend.onrender.com,https://your-backend.onrender.com
```

### Frontend (.env.production)
```bash
REACT_APP_API_URL=https://your-backend.onrender.com/api
```
